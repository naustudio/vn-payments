<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* Â© 2018 NauStud.io
 * @author Eric Tran
 */
/** @module utils */

import crypto from 'crypto';

const urlRegExp = /https?:\/\/.*/;

export { urlRegExp };

/**
 * Global function to convert String to upper case, with type checking
 *
 * @param {string} s
 * @return {string} all upper case string
 */
export function toUpperCase(s = '') {
	if (typeof s !== 'string') {
		throw new Error('toUpperCase:param must be string');
	}

	return s.toUpperCase();
}

/**
 * Equivalent to PHP's `pack` function, using Node native Buffer
 * &lt;br>
 * Note: PHP
 * &lt;br>
 * &lt;pre>    &lt;code>pack('H*', data)&lt;/code>&lt;/pre>
 * is equivalent to Node:
 * &lt;br>
 * &lt;pre>    &lt;code>Buffer.from(data, 'hex')&lt;/code>&lt;/pre>
 *
 * @param {*} data
 * @param {*} encoding
 * @return {Buffer} Buffer of data encoded with `encoding` method
 */
export function pack(data, encoding = 'hex') {
	return Buffer.from(data, encoding);
}

/**
 * Equivalent to PHP's `hash_hmac` function.
 *
 * @param  {string} algorithm  hashing algorithm
 * @param  {*}      data       data string to be hashed
 * @param  {Buffer} secret     Secret key used to hash data, generated with `pack` method
 * @return {string}            digested hash
 */
export function hashHmac(algorithm, data, secret) {
	const hmac = crypto.createHmac(algorithm, secret);
	hmac.update(data);

	return hmac.digest('hex');
}

/**
 * Convenient function to convert number to 2 digit number string
 * @param {*} number
 * @return {string} formatted number
 */
export function to2DigitNumber(number) {
	if (isNaN(number)) {
		throw new Error('to2DigitNumber:param must be a number');
	}
	if (!number) {
		return '00';
	}

	return `0${number}`.substr(-2, 2);
}

/**
 * Convenient function to convert date to format yyyyMMddHHmmss
 *
 * @param {Date} date Date object that need to be formatted
 * @return {string} date string formatted in yyyyMMddHHmmss
 */
export function vnPayDateFormat(date) {
	if (date.constructor.name !== 'Date') {
		throw new Error('vnPayDateFormat:param must be a date');
	}

	let result = '';
	result += date.getFullYear().toString();
	result += to2DigitNumber(date.getMonth() + 1);
	result += to2DigitNumber(date.getDate());
	result += to2DigitNumber(date.getHours());
	result += to2DigitNumber(date.getMinutes());
	result += to2DigitNumber(date.getSeconds());

	return result;
}

/**
 * Convenient function to create md5 hash from string.
 *
 * @param {*} data
 * @return {string} md5 hash
 */
export function createMd5Hash(data) {
	return crypto
		.createHash('md5')
		.update(data)
		.digest('hex');
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-utils.html">utils</a></li></ul><h3>Classes</h3><ul><li><a href="NganLuong.html">NganLuong</a></li><li><a href="OnePayDomestic.html">OnePayDomestic</a></li><li><a href="OnePayInternational.html">OnePayInternational</a></li><li><a href="SohaPay.html">SohaPay</a></li><li><a href="VNPay.html">VNPay</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Feb 09 2018 15:31:46 GMT+0700 (+07)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
